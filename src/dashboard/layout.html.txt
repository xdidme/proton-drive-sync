<!doctype html>
<html lang="en" class="h-full bg-gray-900 text-gray-100 antialiased">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{TITLE}}</title>
    <link rel="icon" type="image/svg+xml" href="/assets/icon.svg" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@2.0.4"></script>
    <script src="https://unpkg.com/htmx-ext-sse@2.2.2/sse.js"></script>
    <script src="https://unpkg.com/idiomorph@0.3.0/dist/idiomorph-ext.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <style>
      .custom-scrollbar::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: #1f2937;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #4b5563;
        border-radius: 4px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #6b7280;
      }
      /* Hide tab labels when viewport is too narrow */
      .tab-label {
        display: none;
      }
      @media (min-width: 1250px) {
        .tab-label {
          display: inline;
        }
      }
      /* Hide GitHub text before title */
      .socials-text {
        display: none;
      }
      @media (min-width: 700px) {
        .socials-text {
          display: inline;
        }
      }
      /* Hide title when narrower */
      .header-title {
        display: none;
      }
      @media (min-width: 1000px) {
        .header-title {
          display: block;
        }
      }
      /* Hide auth badge when very narrow */
      .auth-badge {
        display: none;
      }
      @media (min-width: 900px) {
        .auth-badge {
          display: block;
        }
      }
      /* Hide connected badge at the very end */
      .connected-badge {
        display: none;
      }
      @media (min-width: 600px) {
        .connected-badge {
          display: flex;
        }
      }
      /* Hide GitHub badge first (least priority in header) */
      .github-badge-header {
        display: none;
      }
      @media (min-width: 1400px) {
        .github-badge-header {
          display: flex;
        }
      }
      /* Hide X badge second */
      .x-badge-header {
        display: none;
      }
      @media (min-width: 1300px) {
        .x-badge-header {
          display: flex;
        }
      }
      /* Coffee badge always visible (when badges are shown) */
      /* GitHub badge star hover effect */
      .github-badge:hover [data-lucide='star'] {
        color: #facc15; /* yellow-400 */
      }
    </style>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              proton: {
                DEFAULT: '#6d4aff',
                dark: '#5a3dd6',
                light: '#886bff',
              },
            },
            fontFamily: {
              mono: [
                'SF Mono',
                'Menlo',
                'Monaco',
                'Consolas',
                'Liberation Mono',
                'Courier New',
                'monospace',
              ],
            },
          },
        },
      };
    </script>
  </head>
  <body class="h-full flex flex-col" hx-ext="sse,morph" sse-connect="/api/events">
    <!-- Dry-Run Warning Banner -->
    <div id="dry-run-banner" hx-swap="outerHTML" sse-swap="dry-run-banner">
      {{DRY_RUN_BANNER_CONTENT}}
    </div>

    <!-- Hidden heartbeat listener to trigger pulse animation -->
    <div
      id="heartbeat-listener"
      class="hidden"
      sse-swap="heartbeat"
      hx-on::after-swap="document.body.dispatchEvent(new CustomEvent('heartbeat-received'))"
    ></div>

    <!-- Header -->
    <header class="bg-gray-800 border-b border-gray-700 shadow-sm sticky top-0 z-50">
      <div class="h-16 flex items-center justify-between gap-4 pl-4 pr-4">
        <div class="flex items-center gap-6 min-w-0">
          <a href="/" class="flex items-center gap-3 shrink-0">
            <img
              src="/assets/icon.svg"
              alt="Proton Drive Sync"
              class="w-8 h-8 rounded-lg shadow-lg shadow-proton/20"
            />
            <!-- Title: second to collapse (below 700px) -->
            <h1 class="header-title text-xl font-bold tracking-tight text-white whitespace-nowrap">
              Proton Drive Sync
            </h1>
          </a>

          <!-- Tab Navigation -->
          <nav class="flex items-center gap-1">
            <a
              href="/"
              class="{{HIDE_TABS_DURING_ONBOARDING}} flex items-center gap-1.5 px-2 py-1.5 text-sm font-medium transition-colors whitespace-nowrap {{HOME_TAB_CLASS}}"
            >
              <i data-lucide="house" class="w-4 h-4 shrink-0"></i>
              <!-- Tab labels: first to collapse (below 850px) -->
              <span class="tab-label">Home</span>
            </a>
            <a
              href="/controls"
              class="flex items-center gap-1.5 px-2 py-1.5 text-sm font-medium transition-colors whitespace-nowrap {{CONTROLS_TAB_CLASS}}"
            >
              <i data-lucide="sliders-horizontal" class="w-4 h-4 shrink-0"></i>
              <!-- Tab labels: first to collapse (below 850px) -->
              <span class="tab-label">Controls</span>
            </a>
            <a
              href="/about"
              class="{{HIDE_TABS_DURING_ONBOARDING}} flex items-center gap-1.5 px-2 py-1.5 text-sm font-medium transition-colors whitespace-nowrap {{ABOUT_TAB_CLASS}}"
            >
              <i data-lucide="compass" class="w-4 h-4 shrink-0"></i>
              <!-- Tab labels: first to collapse (below 850px) -->
              <span class="tab-label">About</span>
            </a>
          </nav>
        </div>

        <div class="flex items-center gap-4 shrink-0">
          <!-- X Follow, GitHub Stars Badge and Buy Me a Coffee (hidden on about page) -->
          <div class="flex items-center gap-2 {{HIDE_BADGES}}">
            <!-- X (Twitter) Follow Badge -->
            <a
              href="https://x.com/TheBitFlipper"
              target="_blank"
              class="x-badge-header h-9 flex items-center gap-2 px-3 bg-gray-900 border border-gray-600 rounded-full hover:border-gray-500 transition-colors"
            >
              <img src="/assets/x-logo.svg" alt="X" class="w-4 h-4" />
              <span class="socials-text text-gray-300 text-sm font-medium">Follow</span>
            </a>

            <!-- GitHub Stars Badge -->
            <a
              href="https://github.com/DamianB-BitFlipper/proton-drive-sync"
              target="_blank"
              class="github-badge github-badge-header h-9 flex items-center gap-2 px-3 bg-gray-900 border border-gray-600 rounded-full hover:border-gray-500 transition-colors"
            >
              <img src="/assets/github.svg" alt="GitHub" class="w-4 h-4" />
              <span class="socials-text text-gray-300 text-sm font-medium">GitHub</span>
              <i data-lucide="star" class="w-4 h-4 text-white transition-colors fill-current"></i>
              <img
                src="https://img.shields.io/github/stars/DamianB-BitFlipper/proton-drive-sync?style=flat&label=&color=1f2937"
                alt="Stars"
                class="h-5"
              />
            </a>

            <!-- Buy Me a Coffee -->
            <a href="https://www.buymeacoffee.com/thebitflipper" target="_blank">
              <img
                src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png"
                alt="Buy Me A Coffee"
                class="h-9 w-auto"
              />
            </a>
          </div>

          <!-- Auth Status: third to collapse (below 550px) -->
          <div id="auth-status" class="auth-badge" hx-swap="morph:innerHTML" sse-swap="auth">
            {{AUTH_STATUS_CONTENT}}
          </div>

          <!-- Syncing Status: last to collapse (below 500px) -->
          <div
            id="syncing-status"
            class="connected-badge"
            hx-swap="morph:innerHTML"
            sse-swap="syncing"
          >
            {{SYNCING_STATUS_CONTENT}}
          </div>
        </div>
      </div>
    </header>

    <main class="flex-1 overflow-y-auto custom-scrollbar p-8">{{CONTENT}}</main>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-6 right-6 z-50 flex flex-col gap-2"></div>

    {{LAYOUT_SCRIPTS}}
    {{PAGE_SCRIPTS}}
  </body>
</html>
